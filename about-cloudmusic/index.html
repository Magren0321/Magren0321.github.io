<!DOCTYPE html>
<html lang="zh-CN">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='自己花了点时间用Vue制作的仿网易云音乐移动端'><title>关于CloudMusic</title>

<link rel='canonical' href='https://magren.cn/about-cloudmusic/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='关于CloudMusic'>
<meta property='og:description' content='自己花了点时间用Vue制作的仿网易云音乐移动端'>
<meta property='og:url' content='https://magren.cn/about-cloudmusic/'>
<meta property='og:site_name' content='Magren&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Vue' /><meta property='article:tag' content='项目' /><meta property='article:tag' content='前端' /><meta property='article:tag' content='Typescript' /><meta property='article:published_time' content='2021-01-28T16:33:21&#43;08:00'/><meta property='article:modified_time' content='2021-01-28T16:33:21&#43;08:00'/><meta property='og:image' content='https://magren.cn/about-cloudmusic/banner.png' />
<meta name="twitter:title" content="关于CloudMusic">
<meta name="twitter:description" content="自己花了点时间用Vue制作的仿网易云音乐移动端"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://magren.cn/about-cloudmusic/banner.png' />
    <link rel="shortcut icon" href="https://magren.cn/favicon.ico" />

        <link rel="manifest" href="/manifest.json">
    </head>
    <body class="">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            localStorage.setItem(colorSchemeKey, "auto");
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.body.dataset.scheme = 'dark';
        } else {
            document.body.dataset.scheme = 'light';
        }
    })();
</script><div class="container main-container flex on-phone--column extended article-page with-toolbar">
            <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu117ae63ff7eaed7f027e849e561f5037_176691_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">🌟</span>
                
            </figure>
        
        <h1 class="site-name"><a href="https://magren.cn">Magren&#39;s Blog</a></h1>
        <h2 class="site-description">Idealist &amp; Garbage maker🛸</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='https://github.com/Magren0321'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#9e9e9e" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>
                
                <span>Github</span>
            </a>
        </li>
        
        

        <li >
            <a href='/index.xml'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                
                <span>RSS</span>
            </a>
        </li>
        

        
    </ol>
</aside>

            <main class="main full-width">
    <div id="article-toolbar">
        <a href="https://magren.cn" class="back-home">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



            <span>Back</span>
        </a>
    </div>

    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/about-cloudmusic/">
                <img src="/about-cloudmusic/banner_hu0ea77f992d92db75b170bc4f02a95d6f_316874_800x0_resize_box_3.png"
                        srcset="/about-cloudmusic/banner_hu0ea77f992d92db75b170bc4f02a95d6f_316874_800x0_resize_box_3.png 800w, /about-cloudmusic/banner_hu0ea77f992d92db75b170bc4f02a95d6f_316874_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="533" 
                        loading="lazy"
                        alt="Featured image of post 关于CloudMusic" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/vue/" style="background-color: #2a9d8f; color: #fff;">
                Vue
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/about-cloudmusic/">关于CloudMusic</a>
    </h2>

    
    <h3 class="article-subtitle">
        自己花了点时间用Vue制作的仿网易云音乐移动端
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Jan 28, 2021</time>
    </footer></div>
</header>

    <section class="article-content">
    <h1 id="前言">前言</h1>
<p>这个项目是我某天在宿舍听歌想到的，从16年注册网易云到现在都有五年的时间了，虽然这个平台现在越来越让我失望，但是听了五年了都听出感情来了，就在这个假期里面花了将近一个月磨磨蹭蹭写出来这个项目。至于为什么写的是移动端页面嘛，是因为那时候我听歌是用着我的手机听的……所以模仿的UI也是安卓版网易云音乐的UI。虽然功能没有全部实现，但是比较核心的播放页面还是做出来了，这篇博客也是记录一下这个项目的至今的实现过程还有一些坑。</p>
<p>项目基于Vue + Typescript + Vuetify UI实现。<br>
项目地址：<a class="link" href="https://github.com/Magren0321/cloud-music"  target="_blank" rel="noopener"
    >CloudMusic</a><br>
已经实现的功能：</p>
<ul>
<li>登录</li>
<li>获取歌单</li>
<li>创建歌单</li>
<li>删除/取消收藏歌单</li>
<li>播放歌曲</li>
<li>排行榜</li>
<li>每日推荐</li>
<li>推荐歌单</li>
</ul>
<p>项目截图：
<figure style="flex-grow: 46; flex-basis: 111px">
		<a href="/about-cloudmusic/1.png" data-size="368x790"><img src="/about-cloudmusic/1.png"
				srcset="/about-cloudmusic/1_huc2130268517985628464e59085ef7f55_80597_480x0_resize_box_3.png 480w, /about-cloudmusic/1_huc2130268517985628464e59085ef7f55_80597_1024x0_resize_box_3.png 1024w"
				width="368"
				height="790"
				loading="lazy"
				>
		</a>
		
	</figure><figure style="flex-grow: 46; flex-basis: 111px">
		<a href="/about-cloudmusic/2.png" data-size="368x794"><img src="/about-cloudmusic/2.png"
				srcset="/about-cloudmusic/2_hu9545f01c9939da23f3c442b692267681_304487_480x0_resize_box_3.png 480w, /about-cloudmusic/2_hu9545f01c9939da23f3c442b692267681_304487_1024x0_resize_box_3.png 1024w"
				width="368"
				height="794"
				loading="lazy"
				>
		</a>
		
	</figure><figure style="flex-grow: 46; flex-basis: 111px">
		<a href="/about-cloudmusic/3.png" data-size="369x796"><img src="/about-cloudmusic/3.png"
				srcset="/about-cloudmusic/3_hue5a6091265c58b098ad39809ce123bbd_52812_480x0_resize_box_3.png 480w, /about-cloudmusic/3_hue5a6091265c58b098ad39809ce123bbd_52812_1024x0_resize_box_3.png 1024w"
				width="369"
				height="796"
				loading="lazy"
				>
		</a>
		
	</figure><br>
<figure style="flex-grow: 46; flex-basis: 110px">
		<a href="/about-cloudmusic/4.png" data-size="366x792"><img src="/about-cloudmusic/4.png"
				srcset="/about-cloudmusic/4_hu38c656940c34942dbfda79b64c8df764_132123_480x0_resize_box_3.png 480w, /about-cloudmusic/4_hu38c656940c34942dbfda79b64c8df764_132123_1024x0_resize_box_3.png 1024w"
				width="366"
				height="792"
				loading="lazy"
				>
		</a>
		
	</figure><figure style="flex-grow: 46; flex-basis: 110px">
		<a href="/about-cloudmusic/5.png" data-size="365x791"><img src="/about-cloudmusic/5.png"
				srcset="/about-cloudmusic/5_hud898fc956d5cc2ff30ea3f1fc1fa7d19_23701_480x0_resize_box_3.png 480w, /about-cloudmusic/5_hud898fc956d5cc2ff30ea3f1fc1fa7d19_23701_1024x0_resize_box_3.png 1024w"
				width="365"
				height="791"
				loading="lazy"
				>
		</a>
		
	</figure></p>
<h1 id="播放">播放</h1>
<p>这个可以说是核心功能，毕竟一个听歌的平台不能听歌就说不过去了。<br>
首先歌曲的选择可以来自歌单，可以来自发现页的轮播图，还可以来自播放页面的选择，然后控制歌曲的播放暂停既可以从其他页面下方的播放tab控制，又可以在播放的页面进行控制，如果使用Prop和Emit实在是太多太乱了，所以我这里使用了Vuex。</p>
<blockquote>
<p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
</blockquote>
<p>其实就是把我们需要的组件共享状态抽取出来，以一个全局单例模式管理，然后我们可以在任何一个组件下通过Vuex来修改其状态或者值。<br>
于是我将所选的歌曲ID，以及当前播放的歌单信息，ID传进了Vuex，在播放页面只需要监听Vuex中歌曲id的变化，即可播放新的歌曲；监听Vuex中是否暂停的状态，来控制audio组件暂停或者播放。</p>
<h2 id="播放进度">播放进度</h2>
<p>进度条我用的是Vuetify UI中的slider组件，通过v-model来设定其值。<br>
在audio中通过 <strong>@timeupdate</strong> 来监听audio当前的播放时间戳，接着与播放总时长相除并乘以100得到当前播放进度的百分比，接着赋值给slider组件即可，进度条左边的时间也是通过当前播放的时间戳转换成的时间。</p>
<p>但是这里会有个问题，就是需要通过移动滑块来修改播放的进度，在刚刚@timeupdate绑定的方法中只是单向的将进度赋值给滑块，并且在音乐播放的时候这个方法是一直在运行的，这样无论我怎样移动滑块，滑块都会立马就瞬移到了当前的播放位置，所以这里还得加一个监听是否正在移动滑块的方法，当移动滑块的时候不将当前播放的进度赋值给滑块，然后当我松手的时候将滑块当前的进度转换成时间戳赋值回给audio的播放时间。</p>
<p>我的解决办法是给滑块组件引入了 <strong>@mousedown</strong> 和 <strong>@mouseup</strong>，当鼠标按下的时候将一个变量赋值为true，抬起的时候为false，修改@timeupdate中的方法，设定其只有在该变量为false的时候才会对滑块组件赋值，但是滑动滑块的时候也得修改当前的播放时间，所以给滑块组件引入了 <strong>@change</strong> ，当手动更改了滑块的值的时候会触发该方法，在这个方法里面对audio的播放进度进行修改。</p>
<p><figure style="flex-grow: 242; flex-basis: 580px">
		<a href="/about-cloudmusic/6.png" data-size="363x150"><img src="/about-cloudmusic/6.png"
				srcset="/about-cloudmusic/6_hu945c82448398f1e87b7ba0c46e46f79b_7924_480x0_resize_box_3.png 480w, /about-cloudmusic/6_hu945c82448398f1e87b7ba0c46e46f79b_7924_1024x0_resize_box_3.png 1024w"
				width="363"
				height="150"
				loading="lazy"
				>
		</a>
		
	</figure></p>
<h2 id="歌词实现">歌词实现</h2>
<p>从后台获取的歌词是一个字符串，但是每行歌词都用了\n标识，所以将字符串以\n分割可以得到每行的歌词，每行歌词里中括号里面的是时间，还得将每句歌词以中括号进行分割，最后将时间转换成时间戳，与歌词放在一块做为一个类放入数组中。</p>
<p>设置一个索引，用于记录是第几行歌词，通过offsetHeight获取到歌词组件的高度来确认歌词中线所在的位置，通过索引乘以每行歌词的高度来判断是否滚动。</p>
<p>其实就是给外部的div设置超出隐藏，然后通过修改mragin-top来实现一个滚动的效果，而margin-top的值是由中线的高度减去索引乘以每行歌词的高度来决定。同时可以通过transition属性来设定其改变的时间。</p>
<p>例如：<strong>transition: margin-top 1s;</strong><br>
表示的就是说margin-top属性会在一秒内完成。</p>
<h1 id="关于vue的自定义指令">关于Vue的自定义指令</h1>
<p>在制作的过程中我想实现个功能就是点击某个组件以外的位置的时候隐藏该组件，即点击的不是该组件的时候会执行一个方法。</p>
<p>我查资料的时候发现vue并没有这么一个指令，但是我可以通过自己去自定义这么一个指令来实现这个功能。</p>
<p>首先看看一个自定义的指令对象的钩子函数：</p>
<ul>
<li>bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。</li>
<li>inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。</li>
<li>update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)</li>
<li>componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用。</li>
<li>unbind：只调用一次，指令与元素解绑时调用。</li>
</ul>
<p>接着钩子函数中都有以下几个参数：</p>
<ul>
<li>el：指令所绑定的元素，可以用来直接操作 DOM。</li>
<li>binding：一个对象，包含以下 property：
<ul>
<li>name：指令名，不包括 v- 前缀。</li>
<li>value：指令的绑定值，例如：v-my-directive=&ldquo;1 + 1&rdquo; 中，绑定值为 2。</li>
<li>oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。</li>
<li>expression：字符串形式的指令表达式。例如 v-my-directive=&ldquo;1 + 1&rdquo; 中，表达式为 &ldquo;1 + 1&rdquo;。</li>
<li>arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 &ldquo;foo&rdquo;。</li>
<li>modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。</li>
</ul>
</li>
<li>vnode：Vue 编译生成的虚拟节点。移步 VNode API 来了解更多详情。</li>
<li>oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用</li>
</ul>
<p>以上都是来自Vue的文档，虽然有那么多的钩子函数和变量但是都是可选的，只选需要用到的即可。在实现这个功能中我也就只用到了bind和unbind，其中的变量也是只用到了el和binding。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span><span class="nx">DirectiveOptions</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//自定义指令clickoutside，当点击的不是当前元素的时候执行绑定的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">clickoutside</span><span class="o">:</span> <span class="nx">DirectiveOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 初始化指令
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">bind</span> <span class="p">(</span><span class="nx">el</span><span class="o">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">binding</span><span class="o">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">vnode</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">function</span> <span class="nx">documentHandler</span> <span class="p">(</span><span class="nx">e</span><span class="o">:</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 这里判断点击的元素是否是本身，是本身，则返回
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 判断指令中是否绑定了函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">binding</span><span class="p">.</span><span class="nx">expression</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// 如果绑定了函数 则调用那个函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 给当前元素绑定个私有变量，方便在unbind中可以解除事件监听
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">el</span><span class="p">.</span><span class="nx">vueClickOutside</span> <span class="o">=</span> <span class="nx">documentHandler</span>
</span></span><span class="line"><span class="cl">      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">documentHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">unbind</span> <span class="p">(</span><span class="nx">el</span><span class="o">:</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">binding</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 解除事件监听
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">el</span><span class="p">.</span><span class="nx">vueClickOutside</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">delete</span> <span class="nx">el</span><span class="p">.</span><span class="nx">vueClickOutside</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="nx">clickoutside</span><span class="p">;</span>
</span></span></code></pre></div><p>在需要的地方引入：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">directives</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clickoutside</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><p>使用(当点击的不是该div的时候调用outside方法)：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">v-clickoutside</span><span class="o">=</span><span class="s">&#34;outside&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></div><p><strong>当我把这个东西实现了不久后我发现Vuetify已经集成了这么一个指令，我可以直接使用，这就是不好好看文档的下场。</strong></p>
<h1 id="最后">最后⭐️</h1>
<p>🙏 感谢由 <a class="link" href="https://github.com/Binaryify/NeteaseCloudMusicApi"  target="_blank" rel="noopener"
    >网易云音乐api</a> 提供的接口以及文档。<br>
以及这个项目是个人学习而制作，正常使用还请到<a class="link" href="https://music.163.com/"  target="_blank" rel="noopener"
    >网易云音乐</a>👈</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/vue/">Vue</a>
        
            <a href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a>
        
            <a href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>
        
            <a href="/tags/typescript/">Typescript</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
    integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4"
    crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
    integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="StackLaTeX()"></script>

<script>
    function StackLaTeX() {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });
    }
</script>
    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/vue-ts-axios/">
        
        

        <div class="article-details">
            <h2 class="article-title">Vue Typescript下axios的封装和使用</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/about-hgmap/">
        
        

        <div class="article-details">
            <h2 class="article-title">关于HG地图</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/vue-eventbus/">
        
        

        <div class="article-details">
            <h2 class="article-title">Vue下的EventBus</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/vue-roll/">
        
        

        <div class="article-details">
            <h2 class="article-title">Vue下监听页面滚动以及移动端触摸事件</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/vue-homework/">
        
        

        <div class="article-details">
            <h2 class="article-title">用vue实现的期末作业</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>


    
        
    <div id="vcomments"></div>
<script src='//cdn.jsdelivr.net/npm/valine@^1/dist/Valine.min.js'></script>
<script>
  new Valine({
    el: '#vcomments',
    appId: 'uJmbiosdsmHEiUfSX1dCgDcC-9Nh9j0Va',
    appKey: '2Q75MEaXCEkyYh3WFOsDCMOV',
    avatar: 'retro',
    placeholder: '说点什么吧（邮箱以及网址不会被公开，但其实你不填也可以回复(๑•̀ㅂ•́)و✧）',
    visitor: false
})
</script>



    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 Magren&#39;s Blog

        
        <div id="days"></div>
        </script>
        <script language="javascript">
        function show_date_time(){
        window.setTimeout("show_date_time()", 1000);
        BirthDay=new Date("01/07/2020 15:00:00");
        today=new Date();
        timeold=(today.getTime()-BirthDay.getTime());
        sectimeold=timeold/1000
        secondsold=Math.floor(sectimeold); 
        msPerDay=24*60*60*1000
        e_daysold=timeold/msPerDay
        daysold=Math.floor(e_daysold);
        e_hrsold=(e_daysold-daysold)*24;
        hrsold=setzero(Math.floor(e_hrsold));
        e_minsold=(e_hrsold-hrsold)*60;
        minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
        seconds=setzero(Math.floor((e_minsold-minsold)*60));
        document.getElementById('days').innerHTML="已运行"+daysold+"天"+hrsold+"时"+minsold+"分"+seconds+"秒";
        }
        function setzero(i){
            if (i<10)
            {i="0" + i};
                return i;
            }
            show_date_time();
        </script>
        
    </section>
    
    <section class="powerby">

    

        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.0.1">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('/sw.js', {scope: '/'})
                    .then(function (registration) {
                        
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function (err) {
                        
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
    
</html>
